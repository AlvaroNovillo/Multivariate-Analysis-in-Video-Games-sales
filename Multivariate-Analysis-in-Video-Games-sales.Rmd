---
output: 
  stevetemplates::article:
    fig_caption: true
bibliography: master.bib
biblio-style: apsr
title: "Multivariate Analysis in Video Games sales"
thanks: "Replication files are available on the author's Github account (https://github.com/AlvaroNovillo). **Current version**: `r format(Sys.time(), '%B %d, %Y')`; **Corresponding author**: alvanovi@ucm.es."
author:
- name: √Ålvaro Novillo
  affiliation: Universidad Carlos III
- name: Polo
  affiliation: Universidad Carlos III
abstract: "In this article, we perform several dimensionality reduction techniques and clustering algorithms on a video game sales dataset available on Kaggle (https://www.kaggle.com/datasets/gregorut/videogamesales/data). Specifically, we use Principal Component Analysis (PCA) and Multidimensional Scaling (MDS) to reduce the dimensionality of the dataset. The article discusses the advantages and limitations of each technique and provides insights into the video game market based on the analysis."
keywords: "PCA, Videogames, Sales"
date: "`r format(Sys.time(), '%B %d, %Y')`"
geometry: margin=1in
fontfamily: mathpazo
fontsize: 11pt
# spacing: double
endnote: no

---

```{r setup, include=FALSE}
library(kableExtra)
library(ggplot2)
options(kableExtra.latex.load_packages = TRUE)
knitr::opts_chunk$set(cache=TRUE,
                      message=FALSE, warning=FALSE,
                      fig.path='figs/',
                      cache.path = '_cache/',
                      fig.process = function(x) {
                      x2 = sub('-\\d+([.][a-z]+)$', '\\1', x)
                      if (file.rename(x, x2)) x2 else x
                      })
```


## About the dataset
The dataset under consideration contains information on video games with sales greater than 100,000 copies between 1980 and 2016. The dataset includes 11,493 unique game sales, detailing the name, year of release, genre, platform, and sales figures across numerous regions.

The dataset contains the following fields: 

* **Rank** - Ranked by overall sales
* **Name** - Name of each videogame
* **Platform** - The games platform
* **Year** - Year of Release
* **Genre** - Genre of Game
* **Publisher** - Publisher of Game
* **NA_Sales** - Sales in NA (per Million)
* **EU_Sales** - Sales in EU (per Million)
* **JP_Sales** - Sales in JP (per Million)
* **Other_Sales** - Sales in ROW^[Net Sales (ROW) means the gross amount billed or invoiced on sales by Company and its Affiliates and Sublicensees of Licensed Products, less the following: (a) customary trade, quantity, or cash discounts and commissions to non-affiliated brokers or agents to the extent actually allowed and taken; (b) amounts repaid or credited by reason of rejection or return; (c) to the extent separately stated on purchase orders, invoices, or other documents of sale, any taxes or other governmental charges levied on the production, sale, transportation, delivery, or use of a Licensed Product which is paid by or on behalf of Company; (d) outbound transportation costs prepaid or allowed and costs of insurance in transit; and (e) allowance for bad debt that is customary and reasonable for the industry and in accordance with generally accepted accounting principles. [@lawinsider]] (per Million)
* **Global_Sales** - Total worldwide sales (per Million)

## Data Preprocessing
The dataset contains 11 variables, including quantitative variables like sales figures across various regions (NA_Sales, EU_Sales, JP_Sales, Other_Sales, and Global_Sales), the release year, and the rank of the game based on overall sales. Additionally, it includes multi-state categorical variables like the genre, platform, and publisher of the game. To conform with the desired format, which requires at least two binary variables, we will filter out the video games of recent years and focus on titles that we are already acquainted with. Moreover, we will limit our research to two primary platforms, namely, Xbox One and PS4. 

```{r preprocessing, echo=FALSE}
df = read.csv("vgsales.csv")

# Filter for games in 2015 and 2016, and on the PS4 or PC platform
filtered_df <- df[df$Year %in% c(2015, 2016) & df$Platform %in% c("PS4", "XOne"), ]
head(filtered_df) %>%
  kbl(booktabs = T, caption = "Top five videogames, according to the sales ranking, that we are going to work with") %>%
  kable_styling(latex_options = c("striped", "scale_down","hold_position"), position = "center")

```
In Table 1. the top five selling games for 2015 and 2016, in PS4 ans Xbox One are shown. As we can see, the first one, which is Call Of Duty: Black Ops 3 is among the top 50 best selling games of the dataset (in PS4). 


Examining the distribution of the filtered games rank, as seen in Figure \@ref(fig:rank_distrib), considering its skewness, it can be confirmed that the vast majority of games released during this time period did not have a significant impact on the industry. In actuality, the average ranking of games within our dataset stands at 9373.

```{r rank_distrib,echo= FALSE,fig.cap = "Distribution of the log-transformed Rank values. The red dashed line represents the median of the distribution"}
# Create a histogram
# Calculate the median of the log-transformed Rank
median_rank <- median(log(filtered_df$Rank))

# Create a histogram with median line and text
ggplot(data = filtered_df, aes(y = log(Rank))) +
  geom_histogram(fill = "skyblue", color = "black") +
  geom_hline(yintercept = median_rank, linetype = "dashed", color = "red") +
  geom_text(aes(x = 70, y = median_rank - 0.1 ,label = round(exp(median_rank), 2)),
            vjust = -1, hjust = -0.2, color = "red") +
  labs(y = "log(Rank)") +
  theme_minimal()
```
Since the ranking is solely determined by overall sales figures, it is worthwhile investigating whether the top-selling game in certain regions differs from that of others. Our expectation is that the best-selling games in Japan will differ from those sold in the West.

```{r sales_pairs,echo=FALSE,fig.cap= "Correlation Plot of Sales Variables"}
# Install and load the GGally package if not already installed
# install.packages("GGally")
library(GGally)

# Select the variables of interest from the filtered_df dataset
variables_of_interest <- filtered_df[, c("NA_Sales", "EU_Sales", "JP_Sales")]

# Create a correlation plot
ggpairs(variables_of_interest)

```





# References
\setlength{\parindent}{-0.2in}
\setlength{\leftskip}{0.2in}
\setlength{\parskip}{8pt}
\vspace*{-0.2in}
\noindent
